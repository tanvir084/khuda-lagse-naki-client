<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cupon Page</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="css/signup.css" />

    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <!-- link font awesome icon -->
    <script
      src="https://kit.fontawesome.com/af4e5ff284.js"
      crossorigin="anonymous"
    ></script>

    <!-- font family -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap"
      rel="stylesheet"
    />

    <script>
      $(document).ready(function () {
        $("#icon").click(function () {
          $("ul").toggleClass("show");
        });
      });
    </script>

</head>
<body>

    <header>
        <nav>
          <label class="logo"
            ><i class="fas fa-utensils"></i> Khuda Lagse Naki!</label
          >
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="order2.html">Order</a></li>
            <li><a href="search.html">Search</a></li>
            <li><a href="cart.html">Cart</a></li>
            <li>
              <a href="signup.html"><i class="fas fa-sign-in-alt"></i> Sign Up</a>
            </li>
            <li>
              <a href="login2.html"><i class="fas fa-user-plus"></i> Log In</a>
            </li>
            <li><a href="profile.html">Profile</a></li>
          </ul>
          <label id="icon">
            <i class="fas fa-bars"></i>
          </label>
        </nav>
      </header>

      <section class="mt-5 text-center">
          <h2 class="text-danger">All cupons are here.. Under some terms and conditions: </h2>
      </section>
      <section class="d-flex justify-content-center ps-2">
          <table class="table w-50 text-center"id="cupon-table">
              
              <tr>
                <th>Cupon Name</th>
                <th>Cupon Code</th>
                <th>Reduced Price</th>
                <th>Minimum Ordered Price</th>
                <th>Maximum Use</th>
              </tr>
          </table>
      </section>
    

    <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
    crossorigin="anonymous"
  ></script>

  <script>
      const cupon = () =>{
          fetch ('https://calm-garden-13016.herokuapp.com/user/allcupons')
          .then(res => res.json())
          .then(data => cuponShow(data));
      }
      const cuponShow = (cupons) =>{
        console.log(cupons);
        const cuponTable = document.getElementById('cupon-table');
        for(const cupon of cupons){
            console.log(cupon);
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <tr>
                    <td> ${cupon.name}</td>
                    <td> ${cupon.code}</td>
                    <td> ${cupon.value}</td>
                    <td> ${cupon.minCost}</td>
                    <td> ${cupon.maxUse} </td>
                </tr>
            `

            cuponTable.appendChild(tr);
        }
      }

      cupon();
  </script>
</body>
</html>